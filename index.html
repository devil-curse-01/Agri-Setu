<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Agri Setu ‚Äì Telangana Agriculture Scheme Finder</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,500;0,600;0,700;1,600&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&display=swap"
            rel="stylesheet"
        />
        <style>
            *,
            *::before,
            *::after {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            :root {
                --green: #2d6a4f;
                --green-light: #40916c;
                --green-pale: #d8f3dc;
                --green-ultra: #f0faf2;
                --ink: #0d1f12;
                --ink-mid: #3a4a40;
                --ink-soft: #6b7c72;
                --border: #e3ece5;
                --surface: #ffffff;
                --bg: #f7f9f7;
                --radius: 20px;
                --radius-sm: 12px;
            }

            html {
                scroll-behavior: smooth;
            }
            body {
                font-family: "DM Sans", sans-serif;
                background: var(--bg);
                color: var(--ink);
                min-height: 100vh;
                -webkit-font-smoothing: antialiased;
            }

            /* ‚îÄ‚îÄ NAVBAR ‚îÄ‚îÄ */
            .nav {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                z-index: 200;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 40px;
                height: 64px;
                background: rgba(247, 249, 247, 0.9);
                backdrop-filter: saturate(180%) blur(20px);
                border-bottom: 1px solid var(--border);
            }
            .nav-brand {
                display: flex;
                align-items: center;
                gap: 10px;
                font-family: "Lora", serif;
                font-size: 1.2rem;
                font-weight: 700;
                color: var(--green);
                letter-spacing: -0.3px;
            }
            .nav-chip {
                font-size: 0.68rem;
                font-weight: 600;
                letter-spacing: 1px;
                text-transform: uppercase;
                color: var(--green);
                background: var(--green-pale);
                padding: 4px 12px;
                border-radius: 20px;
            }
            .nav-back {
                display: flex;
                align-items: center;
                gap: 6px;
                font-size: 0.85rem;
                font-weight: 500;
                color: var(--ink-soft);
                background: none;
                border: 1.5px solid var(--border);
                padding: 7px 16px;
                border-radius: 30px;
                cursor: pointer;
                transition: all 0.2s;
                font-family: "DM Sans", sans-serif;
            }
            .nav-back:hover {
                color: var(--green);
                border-color: var(--green);
            }
            .nav-right {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            /* ‚îÄ‚îÄ LANG TOGGLE ‚îÄ‚îÄ */
            .lang-toggle {
                display: flex;
                align-items: center;
                gap: 0;
                border: 1.5px solid var(--border);
                border-radius: 30px;
                overflow: hidden;
                background: var(--surface);
            }
            .lang-btn {
                padding: 6px 14px;
                font-size: 0.78rem;
                font-weight: 600;
                border: none;
                background: transparent;
                cursor: pointer;
                color: var(--ink-soft);
                font-family: "DM Sans", sans-serif;
                transition: all 0.2s;
                letter-spacing: 0.3px;
            }
            .lang-btn.active {
                background: var(--green);
                color: #fff;
                border-radius: 28px;
            }
            .lang-btn:not(.active):hover {
                color: var(--green);
                background: var(--green-ultra);
            }

            /* ‚îÄ‚îÄ PAGE SYSTEM ‚îÄ‚îÄ */
            .page {
                display: none;
                min-height: 100vh;
                padding-top: 64px;
            }
            .page.active {
                display: block;
            }

            /* ‚îÄ‚îÄ INTRO ‚îÄ‚îÄ */
            .intro-wrap {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                min-height: calc(100vh - 64px);
                padding: 60px 24px 80px;
                text-align: center;
                position: relative;
                overflow: hidden;
            }
            .intro-blob {
                position: absolute;
                border-radius: 50%;
                pointer-events: none;
                background: radial-gradient(
                    circle,
                    rgba(45, 106, 79, 0.09) 0%,
                    transparent 65%
                );
            }
            .blob-a {
                width: 800px;
                height: 800px;
                top: -300px;
                right: -250px;
            }
            .blob-b {
                width: 600px;
                height: 600px;
                bottom: -250px;
                left: -200px;
            }

            .intro-pill {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                font-size: 0.72rem;
                font-weight: 600;
                letter-spacing: 1.8px;
                text-transform: uppercase;
                color: var(--green);
                background: var(--green-ultra);
                border: 1px solid var(--green-pale);
                padding: 7px 18px;
                border-radius: 30px;
                margin-bottom: 32px;
                animation: fadeUp 0.5s ease both;
            }
            .intro-h1 {
                font-family: "Lora", serif;
                font-size: clamp(3.5rem, 9vw, 7rem);
                font-weight: 700;
                line-height: 0.95;
                color: var(--ink);
                letter-spacing: -3px;
                margin-bottom: 10px;
                animation: fadeUp 0.5s 0.1s ease both;
            }
            .intro-h1 i {
                color: var(--green);
                font-style: italic;
            }
            .intro-sub {
                font-size: clamp(1rem, 2.2vw, 1.2rem);
                font-weight: 400;
                color: var(--ink-mid);
                max-width: 500px;
                line-height: 1.55;
                margin: 0 auto 14px;
                animation: fadeUp 0.5s 0.2s ease both;
            }
            .intro-desc {
                font-size: 0.92rem;
                color: var(--ink-soft);
                max-width: 440px;
                line-height: 1.75;
                margin: 0 auto 52px;
                animation: fadeUp 0.5s 0.2s ease both;
            }
            .btn-cta {
                display: inline-flex;
                align-items: center;
                gap: 12px;
                background: var(--green);
                color: #fff;
                font-family: "DM Sans", sans-serif;
                font-size: 0.95rem;
                font-weight: 600;
                padding: 15px 36px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
                box-shadow: 0 8px 32px rgba(45, 106, 79, 0.28);
                animation: fadeUp 0.5s 0.3s ease both;
            }
            .btn-cta:hover {
                background: #1e5c3e;
                transform: translateY(-3px) scale(1.02);
                box-shadow: 0 16px 48px rgba(45, 106, 79, 0.35);
            }
            .btn-cta svg {
                transition: transform 0.2s;
            }
            .btn-cta:hover svg {
                transform: translateX(5px);
            }

            .intro-metrics {
                display: flex;
                gap: 56px;
                margin-top: 80px;
                flex-wrap: wrap;
                justify-content: center;
                animation: fadeUp 0.5s 0.4s ease both;
            }
            .metric {
                text-align: center;
            }
            .metric-val {
                font-family: "Lora", serif;
                font-size: 2.4rem;
                font-weight: 700;
                color: var(--green);
                line-height: 1;
            }
            .metric-lbl {
                font-size: 0.75rem;
                color: var(--ink-soft);
                margin-top: 6px;
            }
            .metric-div {
                width: 1px;
                background: var(--border);
                align-self: stretch;
            }

            /* ‚îÄ‚îÄ FORM ‚îÄ‚îÄ */
            .form-wrap {
                max-width: 700px;
                margin: 0 auto;
                padding: 48px 24px 80px;
            }
            .form-heading {
                font-family: "Lora", serif;
                font-size: clamp(1.7rem, 4vw, 2.5rem);
                font-weight: 700;
                color: var(--ink);
                letter-spacing: -1px;
                margin-bottom: 8px;
                animation: fadeUp 0.5s ease both;
            }
            .form-subheading {
                font-size: 0.92rem;
                color: var(--ink-soft);
                margin-bottom: 36px;
                line-height: 1.6;
                animation: fadeUp 0.5s 0.1s ease both;
            }
            .form-card {
                background: var(--surface);
                border-radius: var(--radius);
                padding: 40px;
                box-shadow: 0 6px 30px rgba(45, 106, 79, 0.12);
                border: 1px solid var(--border);
                animation: fadeUp 0.5s 0.2s ease both;
            }
            .fsec {
                margin-bottom: 32px;
            }
            .fsec-title {
                font-size: 0.65rem;
                font-weight: 700;
                letter-spacing: 2.5px;
                text-transform: uppercase;
                color: var(--green);
                margin-bottom: 18px;
                padding-bottom: 10px;
                border-bottom: 1.5px solid var(--green-pale);
            }
            .fgrid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 16px;
            }
            .ffield {
                display: flex;
                flex-direction: column;
                gap: 7px;
            }
            .flabel {
                font-size: 0.8rem;
                font-weight: 600;
                color: var(--ink-mid);
            }
            .flabel-req {
                color: #d63384;
                margin-left: 3px;
            }
            .finput,
            .fselect {
                width: 100%;
                padding: 12px 16px;
                border: 1.5px solid var(--border);
                border-radius: var(--radius-sm);
                font-family: "DM Sans", sans-serif;
                font-size: 0.93rem;
                color: var(--ink);
                background: #fafbfa;
                transition: all 0.2s;
                outline: none;
                appearance: none;
            }
            .finput:focus,
            .fselect:focus {
                border-color: var(--green);
                box-shadow: 0 0 0 3px rgba(45, 106, 79, 0.1);
                background: #fff;
            }
            .finput::placeholder {
                color: #bbb;
            }

            /* Pills */
            .fpills {
                display: flex;
                flex-wrap: wrap;
                gap: 9px;
            }
            .fpill {
                padding: 9px 17px;
                border-radius: 30px;
                border: 1.5px solid var(--border);
                background: #fafbfa;
                cursor: pointer;
                font-size: 0.86rem;
                font-weight: 400;
                color: var(--ink-soft);
                transition: all 0.18s;
                user-select: none;
                font-family: "DM Sans", sans-serif;
            }
            .fpill:hover {
                border-color: var(--green);
                color: var(--green);
            }
            .fpill.sel {
                border-color: var(--green);
                background: var(--green-ultra);
                color: var(--green);
                font-weight: 600;
            }

            /* Submit */
            .btn-submit {
                width: 100%;
                padding: 15px;
                background: var(--green);
                color: #fff;
                font-family: "DM Sans", sans-serif;
                font-size: 0.97rem;
                font-weight: 600;
                border: none;
                border-radius: var(--radius-sm);
                cursor: pointer;
                transition: all 0.25s;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
                margin-top: 4px;
                box-shadow: 0 6px 24px rgba(45, 106, 79, 0.22);
            }
            .btn-submit:hover:not(:disabled) {
                background: #1e5c3e;
                transform: translateY(-1px);
                box-shadow: 0 10px 36px rgba(45, 106, 79, 0.3);
            }
            .btn-submit:disabled {
                opacity: 0.45;
                cursor: not-allowed;
            }

            /* ‚îÄ‚îÄ RESULTS ‚îÄ‚îÄ */
            .results-wrap {
                max-width: 860px;
                margin: 0 auto;
                padding: 48px 24px 80px;
            }
            .results-title {
                font-family: "Lora", serif;
                font-size: clamp(1.6rem, 3.5vw, 2.2rem);
                font-weight: 700;
                color: var(--ink);
                letter-spacing: -0.8px;
                margin-bottom: 12px;
                animation: fadeUp 0.5s ease both;
            }
            .results-pills {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-bottom: 32px;
                animation: fadeUp 0.5s 0.1s ease both;
            }
            .r-chip {
                font-size: 0.78rem;
                font-weight: 500;
                padding: 5px 14px;
                border-radius: 20px;
                border: 1px solid var(--border);
                color: var(--ink-soft);
                background: var(--surface);
            }
            .r-chip-green {
                background: var(--green-pale);
                border-color: transparent;
                color: var(--green);
                font-weight: 700;
            }

            /* Cards */
            .cards {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }
            .card {
                background: var(--surface);
                border-radius: var(--radius);
                border: 1px solid var(--border);
                box-shadow: 0 2px 20px rgba(0, 0, 0, 0.06);
                overflow: hidden;
                transition:
                    box-shadow 0.25s,
                    transform 0.25s;
            }
            .card:hover {
                box-shadow: 0 16px 60px rgba(45, 106, 79, 0.15);
                transform: translateY(-3px);
            }

            .card-head {
                padding: 26px 28px 20px;
                border-bottom: 1px solid var(--border);
            }
            .card-head-row {
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                gap: 12px;
                margin-bottom: 12px;
            }
            .card-name {
                font-family: "Lora", serif;
                font-size: 1.2rem;
                font-weight: 700;
                color: var(--ink);
                line-height: 1.3;
            }
            .card-meta {
                display: flex;
                flex-direction: column;
                align-items: flex-end;
                gap: 5px;
                flex-shrink: 0;
            }
            .card-id {
                font-size: 0.68rem;
                font-weight: 700;
                color: var(--green);
                background: var(--green-pale);
                padding: 4px 11px;
                border-radius: 20px;
                white-space: nowrap;
            }
            .card-loc {
                font-size: 0.65rem;
                font-weight: 600;
                letter-spacing: 0.8px;
                padding: 3px 9px;
                border-radius: 20px;
                white-space: nowrap;
            }
            .loc-ts {
                background: #e8f5e9;
                color: #2d6a4f;
                border: 1px solid #b7dfc9;
            }
            .loc-pan {
                background: #e3f2fd;
                color: #1565c0;
                border: 1px solid #bbdefb;
            }
            .loc-oth {
                background: #fff8e1;
                color: #e65100;
                border: 1px solid #ffe0b2;
            }

            .card-benefit {
                font-size: 0.97rem;
                font-weight: 500;
                color: var(--green-light);
                margin-bottom: 10px;
            }
            .card-tags-row {
                display: flex;
                flex-wrap: wrap;
                gap: 6px;
            }
            .card-tag {
                font-size: 0.7rem;
                font-weight: 500;
                background: var(--bg);
                color: var(--ink-soft);
                padding: 4px 11px;
                border-radius: 20px;
                border: 1px solid var(--border);
            }

            .card-body {
                padding: 22px 28px;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
            }
            .cf {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }
            .cf.span2 {
                grid-column: 1 / -1;
            }
            .cf-label {
                font-size: 0.65rem;
                font-weight: 700;
                letter-spacing: 2px;
                text-transform: uppercase;
                color: var(--ink-soft);
            }
            .cf-val {
                font-size: 0.9rem;
                color: var(--ink-mid);
                line-height: 1.5;
            }

            .docs-ul {
                list-style: none;
                display: flex;
                flex-direction: column;
                gap: 5px;
                margin-top: 2px;
            }
            .docs-ul li {
                font-size: 0.88rem;
                color: var(--ink-mid);
                display: flex;
                align-items: center;
                gap: 9px;
            }
            .docs-ul li::before {
                content: "";
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: var(--green);
                flex-shrink: 0;
            }

            .card-foot {
                padding: 14px 28px 18px;
                border-top: 1px solid var(--border);
                display: flex;
                justify-content: flex-end;
            }
            .btn-official {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                background: var(--green-ultra);
                color: var(--green);
                font-family: "DM Sans", sans-serif;
                font-size: 0.84rem;
                font-weight: 600;
                padding: 10px 20px;
                border-radius: 30px;
                border: 1.5px solid var(--green-pale);
                text-decoration: none;
                cursor: pointer;
                transition: all 0.2s;
            }
            .btn-official:hover {
                background: var(--green);
                color: #fff;
                border-color: var(--green);
            }

            /* Empty */
            .empty {
                text-align: center;
                padding: 80px 32px;
                background: var(--surface);
                border-radius: var(--radius);
                box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
                border: 1px solid var(--border);
            }
            .empty-icon {
                font-size: 3.5rem;
                margin-bottom: 20px;
            }
            .empty h3 {
                font-family: "Lora", serif;
                font-size: 1.4rem;
                color: var(--ink);
                margin-bottom: 10px;
            }
            .empty p {
                font-size: 0.92rem;
                color: var(--ink-soft);
                line-height: 1.7;
            }

            /* Spinner */
            .spin-wrap {
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                gap: 20px;
                min-height: calc(100vh - 200px);
            }
            .spin {
                width: 44px;
                height: 44px;
                border-radius: 50%;
                border: 3px solid var(--green-pale);
                border-top-color: var(--green);
                animation: rotate 0.75s linear infinite;
            }
            .spin-txt {
                font-size: 0.88rem;
                color: var(--ink-soft);
            }

            /* Animations */
            @keyframes fadeUp {
                from {
                    opacity: 0;
                    transform: translateY(22px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            @keyframes rotate {
                to {
                    transform: rotate(360deg);
                }
            }
            @keyframes cardIn {
                from {
                    opacity: 0;
                    transform: translateY(18px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .card-anim {
                animation: cardIn 0.45s ease both;
            }

            /* HOW TO APPLY BUTTON */
            .btn-how {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                background: var(--green);
                color: #fff;
                font-family: "DM Sans", sans-serif;
                font-size: 0.84rem;
                font-weight: 600;
                padding: 10px 20px;
                border-radius: 30px;
                border: none;
                cursor: pointer;
                transition: all 0.2s;
            }
            .btn-how:hover {
                background: #1e5c3e;
                transform: translateY(-1px);
                box-shadow: 0 6px 20px rgba(45, 106, 79, 0.3);
            }

            /* MODAL */
            .modal-overlay {
                position: fixed;
                inset: 0;
                z-index: 999;
                background: rgba(13, 31, 18, 0.55);
                backdrop-filter: blur(6px);
                display: flex;
                align-items: flex-end;
                justify-content: center;
                opacity: 0;
                pointer-events: none;
                transition: opacity 0.3s ease;
            }
            .modal-overlay.open {
                opacity: 1;
                pointer-events: all;
            }
            .modal {
                background: var(--surface);
                border-radius: 28px 28px 0 0;
                width: 100%;
                max-width: 680px;
                max-height: 88vh;
                display: flex;
                flex-direction: column;
                transform: translateY(100%);
                transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
                box-shadow: 0 -8px 60px rgba(0, 0, 0, 0.18);
            }
            .modal-overlay.open .modal {
                transform: translateY(0);
            }
            .modal-handle {
                width: 44px;
                height: 4px;
                border-radius: 4px;
                background: var(--border);
                margin: 14px auto 0;
                flex-shrink: 0;
            }
            .modal-head {
                padding: 18px 28px 16px;
                border-bottom: 1px solid var(--border);
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                gap: 16px;
                flex-shrink: 0;
            }
            .modal-scheme-name {
                font-family: "Lora", serif;
                font-size: 1.1rem;
                font-weight: 700;
                color: var(--ink);
                line-height: 1.3;
            }
            .modal-subtitle {
                font-size: 0.78rem;
                color: var(--ink-soft);
                margin-top: 4px;
            }
            .modal-close {
                background: var(--bg);
                border: 1.5px solid var(--border);
                border-radius: 50%;
                width: 34px;
                height: 34px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                font-size: 1rem;
                color: var(--ink-soft);
                flex-shrink: 0;
                transition: all 0.2s;
                margin-top: 2px;
                font-family: sans-serif;
            }
            .modal-close:hover {
                background: var(--green-pale);
                color: var(--green);
                border-color: var(--green);
            }
            .modal-body {
                padding: 24px 28px 28px;
                overflow-y: auto;
                flex: 1;
            }
            .modal-loading {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 16px;
                padding: 48px 0;
            }
            .modal-spin {
                width: 38px;
                height: 38px;
                border-radius: 50%;
                border: 3px solid var(--green-pale);
                border-top-color: var(--green);
                animation: rotate 0.75s linear infinite;
            }
            .modal-spin-txt {
                font-size: 0.88rem;
                color: var(--ink-soft);
            }
            .steps-list {
                display: flex;
                flex-direction: column;
            }
            .step-item {
                display: flex;
                gap: 16px;
                position: relative;
                animation: fadeUp 0.4s ease both;
            }
            .step-item:not(:last-child)::after {
                content: "";
                position: absolute;
                left: 17px;
                top: 38px;
                bottom: -2px;
                width: 2px;
                background: var(--green-pale);
            }
            .step-num {
                width: 36px;
                height: 36px;
                border-radius: 50%;
                background: var(--green);
                color: #fff;
                font-size: 0.82rem;
                font-weight: 700;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
                margin-top: 2px;
                position: relative;
                z-index: 1;
            }
            .step-content {
                padding-bottom: 22px;
                flex: 1;
            }
            .step-title {
                font-size: 0.95rem;
                font-weight: 600;
                color: var(--ink);
                margin-bottom: 5px;
            }
            .step-desc {
                font-size: 0.88rem;
                color: var(--ink-soft);
                line-height: 1.65;
            }
            .modal-tip {
                margin-top: 4px;
                padding: 14px 16px;
                background: var(--green-ultra);
                border-radius: 14px;
                border: 1px solid var(--green-pale);
                font-size: 0.85rem;
                color: var(--ink-mid);
                line-height: 1.6;
            }
            .modal-tip strong {
                color: var(--green);
            }
            .modal-foot {
                padding: 14px 28px 20px;
                border-top: 1px solid var(--border);
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 12px;
                flex-shrink: 0;
                flex-wrap: wrap;
            }
            .modal-foot-note {
                font-size: 0.78rem;
                color: var(--ink-soft);
            }
            .modal-error {
                text-align: center;
                padding: 40px 20px;
                color: var(--ink-soft);
                font-size: 0.9rem;
                line-height: 1.6;
            }
            .modal-error-icon {
                font-size: 2.5rem;
                margin-bottom: 12px;
            }

            /* Responsive */
            @media (max-width: 600px) {
                .nav {
                    padding: 0 20px;
                }
                .fgrid {
                    grid-template-columns: 1fr;
                }
                .form-card {
                    padding: 24px 20px;
                }
                .card-body {
                    grid-template-columns: 1fr;
                }
                .cf.span2 {
                    grid-column: 1;
                }
                .card-head,
                .card-body,
                .card-foot {
                    padding-left: 20px;
                    padding-right: 20px;
                }
                .intro-metrics {
                    gap: 28px;
                }
                .metric-div {
                    display: none;
                }
                .modal-head,
                .modal-body,
                .modal-foot {
                    padding-left: 20px;
                    padding-right: 20px;
                }
            }
        </style>
    </head>
    <body>
        <!-- ‚îÄ‚îÄ NAVBAR ‚îÄ‚îÄ -->
        <nav class="nav">
            <div class="nav-brand"><span>üåæ</span> Agri Setu</div>
            <div class="nav-right">
                <span class="nav-chip" data-i18n="navChip">Telangana</span>
                <div class="lang-toggle">
                    <button
                        class="lang-btn active"
                        id="btnEn"
                        onclick="setLang('en')"
                    >
                        EN
                    </button>
                    <button class="lang-btn" id="btnHi" onclick="setLang('hi')">
                        ‡§π‡§ø‡§Ç‡§¶‡•Ä
                    </button>
                </div>
                <button
                    class="nav-back"
                    id="btnBack"
                    style="display: none"
                    onclick="goBack()"
                >
                    <span data-i18n="back">‚Üê Back</span>
                </button>
            </div>
        </nav>

        <!-- ‚îÄ‚îÄ INTRO PAGE ‚îÄ‚îÄ -->
        <div id="pageIntro" class="page active">
            <div class="intro-wrap">
                <div class="intro-blob blob-a"></div>
                <div class="intro-blob blob-b"></div>
                <div class="intro-pill">
                    üå±
                    <span data-i18n="introPill">Farming Scheme Finder</span>
                </div>
                <h1 class="intro-h1"><i>Agri</i> Setu</h1>
                <br /><br />
                <p class="intro-sub" data-i18n="introSub">
                    Connecting Telangana Farmers to the Right Government Schemes
                </p>
                <p class="intro-desc" data-i18n="introDesc">
                    Answer a few simple questions about your farm, land size,
                    and needs ‚Äî we instantly match you with every government
                    scheme you're eligible for, completely free of charge.
                </p>
                <button class="btn-cta" onclick="showPage('form')">
                    <span data-i18n="introBtn">Get Started</span>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path
                            d="M3 8h10M9 4l4 4-4 4"
                            stroke="currentColor"
                            stroke-width="1.8"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                    </svg>
                </button>
                <div class="intro-metrics">
                    <div class="metric">
                        <div class="metric-val">50+</div>
                        <div class="metric-lbl" data-i18n="metricSchemes">
                            Active Schemes
                        </div>
                    </div>
                    <div class="metric-div"></div>
                    <div class="metric">
                        <div class="metric-val">33</div>
                        <div class="metric-lbl" data-i18n="metricDistricts">
                            Districts Covered
                        </div>
                    </div>
                    <div class="metric-div"></div>
                    <div class="metric">
                        <div class="metric-val" data-i18n="metricFreeVal">
                            Free
                        </div>
                        <div class="metric-lbl" data-i18n="metricFree">
                            No Cost Service
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ FORM PAGE ‚îÄ‚îÄ -->
        <div id="pageForm" class="page">
            <div class="form-wrap">
                <h2 class="form-heading" data-i18n="formHeading">
                    Tell us about your farm
                </h2>
                <p class="form-subheading" data-i18n="formSubheading">
                    Fill in your details to instantly discover schemes you're
                    eligible for.
                </p>

                <div class="form-card">
                    <!-- Personal Info -->
                    <div class="fsec">
                        <div class="fsec-title" data-i18n="secPersonal">
                            Personal Information
                        </div>
                        <div class="fgrid">
                            <div class="ffield">
                                <label class="flabel"
                                    ><span data-i18n="labelName"
                                        >Farmer Name</span
                                    >
                                    <span class="flabel-req">*</span></label
                                >
                                <input
                                    class="finput"
                                    id="fName"
                                    type="text"
                                    placeholder="Your full name"
                                    data-i18n-placeholder="placeholderName"
                                    oninput="checkValid()"
                                />
                            </div>
                            <div class="ffield">
                                <label class="flabel"
                                    ><span data-i18n="labelDistrict"
                                        >District</span
                                    >
                                    <span class="flabel-req">*</span></label
                                >
                                <select
                                    class="fselect"
                                    id="fDistrict"
                                    onchange="checkValid()"
                                >
                                    <option
                                        value=""
                                        data-i18n="optSelectDistrict"
                                    >
                                        Select your district
                                    </option>
                                    <option>Adilabad</option>
                                    <option>Bhadradri Kothagudem</option>
                                    <option>Hanumakonda</option>
                                    <option>Hyderabad</option>
                                    <option>Jagtial</option>
                                    <option>Jangaon</option>
                                    <option>Jayashankar Bhupalpally</option>
                                    <option>Jogulamba Gadwal</option>
                                    <option>Kamareddy</option>
                                    <option>Karimnagar</option>
                                    <option>Khammam</option>
                                    <option>Kumuram Bheem Asifabad</option>
                                    <option>Mahabubabad</option>
                                    <option>Mahabubnagar</option>
                                    <option>Mancherial</option>
                                    <option>Medak</option>
                                    <option>Medchal-Malkajgiri</option>
                                    <option>Mulugu</option>
                                    <option>Nagarkurnool</option>
                                    <option>Nalgonda</option>
                                    <option>Narayanpet</option>
                                    <option>Nirmal</option>
                                    <option>Nizamabad</option>
                                    <option>Peddapalli</option>
                                    <option>Rajanna Sircilla</option>
                                    <option>Rangareddy</option>
                                    <option>Sangareddy</option>
                                    <option>Siddipet</option>
                                    <option>Suryapet</option>
                                    <option>Vikarabad</option>
                                    <option>Wanaparthy</option>
                                    <option>Warangal</option>
                                    <option>Yadadri Bhuvanagiri</option>
                                </select>
                            </div>
                            <div class="ffield">
                                <label class="flabel"
                                    ><span data-i18n="labelCaste"
                                        >Caste Category</span
                                    >
                                    <span class="flabel-req">*</span></label
                                >
                                <select
                                    class="fselect"
                                    id="fCaste"
                                    onchange="checkValid()"
                                >
                                    <option value="" data-i18n="optSelectCaste">
                                        Select caste category
                                    </option>
                                    <optgroup label="Scheduled">
                                        <option value="SC">
                                            SC ‚Äî Scheduled Caste
                                        </option>
                                        <option value="ST">
                                            ST ‚Äî Scheduled Tribe
                                        </option>
                                    </optgroup>
                                    <optgroup label="Backward Classes">
                                        <option value="BC-A">
                                            BC-A ‚Äî Backward Class A
                                        </option>
                                        <option value="BC-B">
                                            BC-B ‚Äî Backward Class B
                                        </option>
                                        <option value="BC-C">
                                            BC-C ‚Äî Backward Class C
                                        </option>
                                        <option value="BC-D">
                                            BC-D ‚Äî Backward Class D
                                        </option>
                                        <option value="BC-E">
                                            BC-E ‚Äî Backward Class E
                                        </option>
                                    </optgroup>
                                    <optgroup label="Other">
                                        <option value="OC">
                                            OC ‚Äî Open / General Category
                                        </option>
                                        <option value="EWS">
                                            EWS ‚Äî Economically Weaker Section
                                        </option>
                                        <option value="Minority">
                                            Minority
                                        </option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Land & Crop -->
                    <div class="fsec">
                        <div class="fsec-title" data-i18n="secLand">
                            Land & Crop Details
                        </div>
                        <div class="fgrid">
                            <div class="ffield">
                                <label class="flabel"
                                    ><span data-i18n="labelLand"
                                        >Land Size (acres)</span
                                    >
                                    <span class="flabel-req">*</span></label
                                >
                                <input
                                    class="finput"
                                    id="fLand"
                                    type="number"
                                    min="0"
                                    max="50"
                                    step="0.5"
                                    placeholder="e.g. 2.5"
                                    data-i18n-placeholder="placeholderLand"
                                    oninput="checkLand(); checkValid()"
                                />
                                <div
                                    id="landError"
                                    style="
                                        color: #c0392b;
                                        font-size: 0.78rem;
                                        margin-top: 4px;
                                        display: none;
                                    "
                                >
                                    ‚ö† Maximum land allowed is 50 acres.
                                </div>
                            </div>
                            <div class="ffield">
                                <label class="flabel"
                                    ><span data-i18n="labelCrop"
                                        >Crop Type</span
                                    >
                                    <span class="flabel-req">*</span></label
                                >
                                <select
                                    class="fselect"
                                    id="fCrop"
                                    onchange="checkValid()"
                                >
                                    <option value="" data-i18n="optSelectCrop">
                                        Select your crop
                                    </option>
                                    <optgroup label="Cereals & Millets">
                                        <option>Rice (Paddy)</option>
                                        <option>Maize (Corn)</option>
                                        <option>Sorghum (Jowar)</option>
                                        <option>Pearl Millet (Bajra)</option>
                                        <option>Finger Millet (Ragi)</option>
                                    </optgroup>
                                    <optgroup label="Pulses">
                                        <option>Red Gram (Tur / Arhar)</option>
                                        <option>Chickpea (Bengal Gram)</option>
                                        <option>Black Gram (Urad)</option>
                                        <option>Green Gram (Moong)</option>
                                    </optgroup>
                                    <optgroup label="Oilseeds">
                                        <option>Groundnut</option>
                                        <option>Sunflower</option>
                                        <option>Sesame (Til)</option>
                                        <option>Soybean</option>
                                        <option>Castor</option>
                                    </optgroup>
                                    <optgroup label="Cash Crops">
                                        <option>Cotton</option>
                                        <option>Sugarcane</option>
                                        <option>Turmeric</option>
                                        <option>Chilli</option>
                                        <option>Ginger</option>
                                    </optgroup>
                                    <optgroup label="Vegetables">
                                        <option>Onion</option>
                                        <option>Tomato</option>
                                        <option>Brinjal</option>
                                        <option>Okra (Bhendi)</option>
                                        <option>Bitter Gourd</option>
                                        <option>Bottle Gourd</option>
                                        <option>Cucumber</option>
                                    </optgroup>
                                    <optgroup label="Fruits / Horticulture">
                                        <option>Mango</option>
                                        <option>Banana</option>
                                        <option>Papaya</option>
                                        <option>Guava</option>
                                        <option>Sweet Lime (Mosambi)</option>
                                        <option>Pomegranate</option>
                                        <option>Grapes</option>
                                        <option>Watermelon</option>
                                        <option>Sapota (Chiku)</option>
                                    </optgroup>
                                    <optgroup label="Allied / Specialty">
                                        <option>Sericulture (Silk)</option>
                                        <option>
                                            Aquaculture (Fish Farming)
                                        </option>
                                        <option>Livestock / Dairy</option>
                                        <option>Oilseeds (Mixed)</option>
                                        <option>Agro-Forestry</option>
                                    </optgroup>
                                    <optgroup label="General">
                                        <option>Horticulture (Mixed)</option>
                                        <option>Vegetables (Mixed)</option>
                                        <option>Pulses (Mixed)</option>
                                        <option>Millets (Mixed)</option>
                                        <option>Other / General Farming</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Annual Income -->
                    <div class="fsec">
                        <div class="fsec-title">
                            Annual Income
                            <span class="flabel-req" style="font-size: 0.7rem"
                                >*</span
                            >
                        </div>
                        <div class="fgrid" style="grid-template-columns: 1fr">
                            <div class="ffield">
                                <label class="flabel">
                                    <span>Annual Family Income (‚Çπ)</span>
                                    <span class="flabel-req">*</span>
                                </label>
                                <input
                                    class="finput"
                                    id="fIncome"
                                    type="number"
                                    min="0"
                                    step="1000"
                                    placeholder="e.g. 120000"
                                    oninput="checkIncome(); checkValid()"
                                />
                                <div
                                    id="incomeHint"
                                    style="
                                        color: var(--ink-soft);
                                        font-size: 0.78rem;
                                        margin-top: 4px;
                                    "
                                >
                                    üí° Limit: ‚Çπ5,00,000 per year. Above this
                                    limit, most schemes won't apply.
                                </div>
                                <div
                                    id="incomeError"
                                    style="
                                        color: #c0392b;
                                        font-size: 0.78rem;
                                        margin-top: 4px;
                                        display: none;
                                    "
                                >
                                    ‚ö† Annual income exceeds ‚Çπ5,00,000 ‚Äî you are
                                    not eligible for these schemes.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Farmer Category -->
                    <div class="fsec">
                        <div class="fsec-title">
                            <span data-i18n="secCategory">Farmer Category</span>
                            <span class="flabel-req" style="font-size: 0.7rem"
                                >*</span
                            >
                        </div>
                        <div class="fpills" id="pillsCategory">
                            <button
                                class="fpill"
                                onclick="selectPill('category',this,'Small')"
                                data-i18n="pillSmall"
                            >
                                Small
                            </button>
                            <button
                                class="fpill"
                                onclick="selectPill('category',this,'Marginal')"
                                data-i18n="pillMarginal"
                            >
                                Marginal
                            </button>
                            <button
                                class="fpill"
                                onclick="selectPill('category',this,'Tribal')"
                                data-i18n="pillTribal"
                            >
                                Large
                            </button>
                        </div>
                        <input type="hidden" id="fCategory" />
                    </div>

                    <!-- Ownership -->
                    <div class="fsec">
                        <div class="fsec-title">
                            <span data-i18n="secOwnership">Land Ownership</span>
                            <span class="flabel-req" style="font-size: 0.7rem"
                                >*</span
                            >
                        </div>
                        <div class="fpills" id="pillsOwnership">
                            <button
                                class="fpill"
                                onclick="selectPill('ownership',this,'Owner')"
                                data-i18n="pillOwner"
                            >
                                Owner
                            </button>
                            <button
                                class="fpill"
                                onclick="selectPill('ownership',this,'Tenant')"
                                data-i18n="pillTenant"
                            >
                                Tenant
                            </button>
                        </div>
                        <input type="hidden" id="fOwnership" />
                    </div>

                    <!-- Soil & Water -->
                    <div class="fsec">
                        <div class="fsec-title" data-i18n="secSoil">
                            Soil & Water Details
                        </div>
                        <div class="fgrid">
                            <div class="ffield">
                                <label class="flabel"
                                    ><span data-i18n="labelSoil"
                                        >Soil Type</span
                                    >
                                    <span class="flabel-req">*</span></label
                                >
                                <select
                                    class="fselect"
                                    id="fSoil"
                                    onchange="checkValid()"
                                >
                                    <option value="" data-i18n="optSelectSoil">
                                        Select soil type
                                    </option>
                                    <optgroup label="Common Telangana Soils">
                                        <option>Red Sandy Loam</option>
                                        <option>Red Loam</option>
                                        <option>
                                            Deep Black Cotton (Vertisol)
                                        </option>
                                        <option>Shallow Black (Regur)</option>
                                        <option>Medium Black</option>
                                    </optgroup>
                                    <optgroup label="Other Soil Types">
                                        <option>Alluvial</option>
                                        <option>Laterite</option>
                                        <option>Sandy</option>
                                        <option>Clay</option>
                                        <option>Loamy</option>
                                        <option>Saline / Alkaline</option>
                                        <option>Rocky / Gravelly</option>
                                        <option>
                                            Forest / Tribal Land Soil
                                        </option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="ffield">
                                <label class="flabel"
                                    ><span data-i18n="labelWater"
                                        >Water / Irrigation System</span
                                    >
                                    <span class="flabel-req">*</span></label
                                >
                                <select
                                    class="fselect"
                                    id="fWater"
                                    onchange="checkValid()"
                                >
                                    <option value="" data-i18n="optSelectWater">
                                        Select water source
                                    </option>
                                    <optgroup label="Rain-Based">
                                        <option value="Rainfed">
                                            Rainfed (No Irrigation)
                                        </option>
                                    </optgroup>
                                    <optgroup label="Surface Water">
                                        <option>Canal Irrigation</option>
                                        <option>Tank / Pond Irrigation</option>
                                        <option>River Lift Irrigation</option>
                                        <option>Reservoir / Dam Water</option>
                                    </optgroup>
                                    <optgroup label="Groundwater">
                                        <option>Borewell / Tubewell</option>
                                        <option>Open Well</option>
                                        <option>Dug Well</option>
                                    </optgroup>
                                    <optgroup label="Modern Systems">
                                        <option>Drip Irrigation</option>
                                        <option>Sprinkler Irrigation</option>
                                        <option>Solar Pump Irrigation</option>
                                        <option>Micro Irrigation</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                    </div>

                    <button
                        class="btn-submit"
                        id="btnSubmit"
                        disabled
                        onclick="findSchemes()"
                    >
                        <span data-i18n="btnSubmit">Find My Schemes</span>
                        <svg
                            width="16"
                            height="16"
                            viewBox="0 0 16 16"
                            fill="none"
                        >
                            <path
                                d="M3 8h10M9 4l4 4-4 4"
                                stroke="currentColor"
                                stroke-width="1.8"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ RESULTS PAGE ‚îÄ‚îÄ -->
        <div id="pageResults" class="page">
            <div id="resultsSpinner" class="spin-wrap">
                <div class="spin"></div>
                <div class="spin-txt" data-i18n="spinnerText">
                    Matching schemes for you‚Ä¶
                </div>
            </div>
            <div id="resultsContent" class="results-wrap" style="display: none">
                <h2 class="results-title" id="resultsTitle"></h2>
                <div class="results-pills" id="resultsPills"></div>
                <div id="resultsList"></div>
            </div>
        </div>

        <script>
            // ‚îÄ‚îÄ TRANSLATIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            const TRANSLATIONS = {
                en: {
                    navChip: "Telangana",
                    back: "‚Üê Back",
                    introPill: "Telangana Scheme Finder",
                    introSub:
                        "Connecting Telangana Farmers to the Right Government Schemes",
                    introDesc:
                        "Answer a few simple questions about your farm, land size, and needs ‚Äî we instantly match you with every government scheme you're eligible for, completely free of charge.",
                    introBtn: "Get Started",
                    metricSchemes: "Active Schemes",
                    metricDistricts: "Districts Covered",
                    metricFreeVal: "Free",
                    metricFree: "No Cost Service",
                    formHeading: "Tell us about your farm",
                    formSubheading:
                        "Fill in your details to instantly discover schemes you're eligible for.",
                    secPersonal: "Personal Information",
                    labelName: "Farmer Name",
                    placeholderName: "Your full name",
                    labelDistrict: "District",
                    optSelectDistrict: "Select your district",
                    labelCaste: "Caste Category",
                    optSelectCaste: "Select caste category",
                    secLand: "Land & Crop Details",
                    labelLand: "Land Size (acres)",
                    placeholderLand: "e.g. 2.5",
                    labelCrop: "Crop Type",
                    optSelectCrop: "Select your crop",
                    secCategory: "Farmer Category",
                    pillSmall: "Small",
                    pillMarginal: "Marginal",
                    pillTribal: "Tribal",
                    pillLandless: "Landless",
                    pillGeneral: "General",
                    secOwnership: "Land Ownership",
                    pillOwner: "Owner",
                    pillTenant: "Tenant",
                    secSoil: "Soil & Water Details",
                    labelSoil: "Soil Type",
                    optSelectSoil: "Select soil type",
                    labelWater: "Water / Irrigation System",
                    optSelectWater: "Select water source",
                    btnSubmit: "Find My Schemes",
                    spinnerText: "Matching schemes for you‚Ä¶",
                    modalSubtitle: "Step-by-step application guide",
                    modalLoading: "Generating application steps‚Ä¶",
                    modalFootNote:
                        "üí° Steps are AI-generated based on scheme details",
                    officialWebsite: "Official Website",
                    howToApply: "How to Apply",
                    schemesFoundSingle: "Scheme Found for You",
                    schemesFoundPlural: "Schemes Found for You",
                    noMatch: "No Matching Schemes",
                    noMatchMsg:
                        "Please adjust your details ‚Äî try different crop type, land size, or farmer category to discover more schemes.",
                    cfCrop: "Crop",
                    cfMaxLand: "Max Land",
                    cfNoLimit: "No Limit",
                    cfEligibility: "Eligibility",
                    cfBenefits: "Benefits",
                    cfDocs: "Required Documents",
                    acres: "acres",
                    schemeNum: "Scheme #",
                    eligibleCount: "eligible",
                    farmerSuffix: "Farmer",
                    locTelangana: "üèõ Telangana",
                    locPanIndia: "üáÆüá≥ Pan-India",
                    proTip: "üí° Pro Tip",
                },
                hi: {
                    navChip: "‡§§‡•á‡§≤‡§Ç‡§ó‡§æ‡§®‡§æ",
                    back: "‚Üê ‡§µ‡§æ‡§™‡§∏",
                    introPill: "‡§§‡•á‡§≤‡§Ç‡§ó‡§æ‡§®‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ñ‡•ã‡§ú‡§ï",
                    introSub:
                        "‡§§‡•á‡§≤‡§Ç‡§ó‡§æ‡§®‡§æ ‡§ï‡•á ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§π‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§ú‡•ã‡§°‡§º‡§®‡§æ",
                    introDesc:
                        "‡§Ö‡§™‡§®‡•Ä ‡§ñ‡•á‡§§‡•Ä, ‡§≠‡•Ç‡§Æ‡§ø ‡§î‡§∞ ‡§ú‡§º‡§∞‡•Ç‡§∞‡§§‡•ã‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§∏‡§∞‡§≤ ‡§∏‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á‡§Ç ‚Äî ‡§π‡§Æ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§â‡§® ‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§Ü‡§™‡§ï‡§æ ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡§ø‡§®‡§ï‡•á ‡§Ü‡§™ ‡§™‡§æ‡§§‡•ç‡§∞ ‡§π‡•à‡§Ç, ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§Æ‡•Å‡§´‡•ç‡§§‡•§",
                    introBtn: "‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç",
                    metricSchemes: "‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Å",
                    metricDistricts: "‡§ï‡§µ‡§∞ ‡§ï‡§ø‡§è ‡§ú‡§ø‡§≤‡•á",
                    metricFreeVal: "‡§Æ‡•Å‡§´‡•ç‡§§",
                    metricFree: "‡§Æ‡•Å‡§´‡•ç‡§§ ‡§∏‡•á‡§µ‡§æ",
                    formHeading: "‡§Ö‡§™‡§®‡•Ä ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ‡§è‡§Ç",
                    formSubheading:
                        "‡§Ö‡§™‡§®‡•Ä ‡§™‡§æ‡§§‡•ç‡§∞ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Å ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ú‡§æ‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç‡•§",
                    secPersonal: "‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä",
                    labelName: "‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ",
                    placeholderName: "‡§Ü‡§™‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ",
                    labelDistrict: "‡§ú‡§ø‡§≤‡§æ",
                    optSelectDistrict: "‡§Ö‡§™‡§®‡§æ ‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç",
                    labelCaste: "‡§ú‡§æ‡§§‡§ø ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä",
                    optSelectCaste: "‡§ú‡§æ‡§§‡§ø ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç",
                    secLand: "‡§≠‡•Ç‡§Æ‡§ø ‡§è‡§µ‡§Ç ‡§´‡§∏‡§≤ ‡§µ‡§ø‡§µ‡§∞‡§£",
                    labelLand: "‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ (‡§è‡§ï‡§°‡§º)",
                    placeholderLand: "‡§ú‡•à‡§∏‡•á 2.5",
                    labelCrop: "‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞",
                    optSelectCrop: "‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç",
                    secCategory: "‡§ï‡§ø‡§∏‡§æ‡§® ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä",
                    pillSmall: "‡§≤‡§ò‡•Å",
                    pillMarginal: "‡§∏‡•Ä‡§Æ‡§æ‡§Ç‡§§",
                    pillTribal: "‡§ú‡§®‡§ú‡§æ‡§§‡•Ä‡§Ø",
                    pillLandless: "‡§≠‡•Ç‡§Æ‡§ø‡§π‡•Ä‡§®",
                    pillGeneral: "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø",
                    secOwnership: "‡§≠‡•Ç‡§Æ‡§ø ‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§§‡•ç‡§µ",
                    pillOwner: "‡§Æ‡§æ‡§≤‡§ø‡§ï",
                    pillTenant: "‡§ï‡§ø‡§∞‡§æ‡§Ø‡•á‡§¶‡§æ‡§∞",
                    secSoil: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§è‡§µ‡§Ç ‡§ú‡§≤ ‡§µ‡§ø‡§µ‡§∞‡§£",
                    labelSoil: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞",
                    optSelectSoil: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç",
                    labelWater: "‡§ú‡§≤ / ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä",
                    optSelectWater: "‡§ú‡§≤ ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§ö‡•Å‡§®‡•á‡§Ç",
                    btnSubmit: "‡§Æ‡•á‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Å ‡§ñ‡•ã‡§ú‡•á‡§Ç",
                    spinnerText: "‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Å ‡§ñ‡•ã‡§ú‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç‚Ä¶",
                    modalSubtitle: "‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡•Ä ‡§ö‡§∞‡§£-‡§¶‡§∞-‡§ö‡§∞‡§£ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ø‡§ï‡§æ",
                    modalLoading: "‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡•á ‡§ö‡§∞‡§£ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§ø‡§è ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‚Ä¶",
                    modalFootNote:
                        "üí° ‡§ö‡§∞‡§£ AI ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§ø‡§è ‡§ó‡§è ‡§π‡•à‡§Ç",
                    officialWebsite: "‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü",
                    howToApply: "‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç",
                    schemesFoundSingle: "‡§Ø‡•ã‡§ú‡§®‡§æ ‡§Æ‡§ø‡§≤‡•Ä ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è",
                    schemesFoundPlural: "‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Å ‡§Æ‡§ø‡§≤‡•Ä‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è",
                    noMatch: "‡§ï‡•ã‡§à ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç",
                    noMatchMsg:
                        "‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•á ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¨‡§¶‡§≤‡•á‡§Ç ‚Äî ‡§Ö‡§®‡•ç‡§Ø ‡§´‡§∏‡§≤, ‡§≠‡•Ç‡§Æ‡§ø ‡§Ü‡§ï‡§æ‡§∞ ‡§Ø‡§æ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Ç‡•§",
                    cfCrop: "‡§´‡§∏‡§≤",
                    cfMaxLand: "‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ‡§≠‡•Ç‡§Æ‡§ø",
                    cfNoLimit: "‡§ï‡•ã‡§à ‡§∏‡•Ä‡§Æ‡§æ ‡§®‡§π‡•Ä‡§Ç",
                    cfEligibility: "‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ",
                    cfBenefits: "‡§≤‡§æ‡§≠",
                    cfDocs: "‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º",
                    acres: "‡§è‡§ï‡§°‡§º",
                    schemeNum: "‡§Ø‡•ã‡§ú‡§®‡§æ #",
                    eligibleCount: "‡§™‡§æ‡§§‡•ç‡§∞",
                    farmerSuffix: "‡§ï‡§ø‡§∏‡§æ‡§®",
                    locTelangana: "üèõ ‡§§‡•á‡§≤‡§Ç‡§ó‡§æ‡§®‡§æ",
                    locPanIndia: "üáÆüá≥ ‡§™‡•à‡§®-‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ",
                    proTip: "üí° ‡§™‡•ç‡§∞‡•ã ‡§ü‡§ø‡§™",
                },
            };

            let currentLang = "en";

            function t(key) {
                return (
                    TRANSLATIONS[currentLang][key] ||
                    TRANSLATIONS["en"][key] ||
                    key
                );
            }

            function setLang(lang) {
                currentLang = lang;
                document
                    .getElementById("btnEn")
                    .classList.toggle("active", lang === "en");
                document
                    .getElementById("btnHi")
                    .classList.toggle("active", lang === "hi");

                // Update all data-i18n elements
                document.querySelectorAll("[data-i18n]").forEach((el) => {
                    const key = el.getAttribute("data-i18n");
                    el.textContent = t(key);
                });

                // Update placeholders
                document
                    .querySelectorAll("[data-i18n-placeholder]")
                    .forEach((el) => {
                        const key = el.getAttribute("data-i18n-placeholder");
                        el.placeholder = t(key);
                    });

                // Update select default options
                document.querySelectorAll("[data-i18n]").forEach((el) => {
                    if (el.tagName === "OPTION") {
                        const key = el.getAttribute("data-i18n");
                        el.textContent = t(key);
                    }
                });

                // Re-render results if on results page (to update labels)
                if (currentPage === "results" && renderedSchemes.length > 0) {
                    const list = document.getElementById("resultsList");
                    const currentSchemes = renderedSchemes;
                    renderResults(currentSchemes, lastFormData);
                }
            }

            // ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            const SCHEMES = [
                {
                    id: 2,
                    name: "Rythu Bima",
                    short_benefit: "Life insurance cover for farmers.",
                    location: "Telangana",
                    crop: "all",
                    max_land: 50,
                    eligibility:
                        "Farmers aged 18\u201359 yrs registered as landowners.",
                    documents: [
                        "Aadhaar",
                        "Land Records",
                        "Death Certificate (for claim)",
                    ],
                    benefits:
                        "‚Çπ5 lakh insurance payout to nominee in case of death.",
                    official_link: "https://rythubima.telangana.gov.in/",
                    tags: ["Insurance", "Farmer Welfare"],
                },
                {
                    id: 3,
                    name: "Telangana Crop Loan Waiver Scheme",
                    short_benefit: "Waiver of eligible crop loans.",
                    location: "Telangana",
                    crop: "all",
                    max_land: 5,
                    eligibility: "Small & marginal farmers with crop loans.",
                    documents: ["Loan Documents", "Aadhaar", "Land Records"],
                    benefits: "Waiver of crop loans up to govt limit.",
                    official_link: "https://www.telangana.gov.in/",
                    tags: ["Loan Waiver", "Financial Relief"],
                },
                {
                    id: 4,
                    name: "PM\u2011KISAN Samman Nidhi",
                    short_benefit: "‚Çπ6,000 per year income support.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 5,
                    eligibility:
                        "Small & marginal farmers with cultivable land.",
                    documents: ["Aadhaar", "Land Records", "Bank Passbook"],
                    benefits: "‚Çπ6,000/yr in three installments via DBT.",
                    official_link: "https://pmkisan.gov.in/",
                    tags: ["Central Scheme", "Income Support"],
                },
                {
                    id: 5,
                    name: "PM Fasal Bima Yojana",
                    short_benefit: "Crop insurance against calamities.",
                    location: "Pan\u2011India",
                    crop: "all notified",
                    max_land: 50,
                    eligibility:
                        "Farmers growing notified crops in notified areas.",
                    documents: [
                        "Aadhaar",
                        "Land Records",
                        "Sowing Certificate",
                    ],
                    benefits:
                        "Coverage for crop loss due to drought, flood, pests.",
                    official_link: "https://pmfby.gov.in/",
                    tags: ["Insurance", "Crop Protection"],
                },
                {
                    id: 6,
                    name: "Mission Kakatiya",
                    short_benefit: "Restoration of irrigation tanks.",
                    location: "Telangana",
                    crop: "all",
                    max_land: 50,
                    eligibility: "Farmers dependent on tank irrigation.",
                    documents: ["Land Records"],
                    benefits: "Improved water storage capacity.",
                    official_link: "https://www.telangana.gov.in/",
                    tags: ["Irrigation", "Water Management"],
                },
                {
                    id: 7,
                    name: "Kaleshwaram Lift Irrigation Project Support",
                    short_benefit: "Major irrigation infrastructure support.",
                    location: "Telangana",
                    crop: "all",
                    max_land: 50,
                    eligibility: "Farmers in command areas.",
                    documents: ["Land Records"],
                    benefits: "Assured irrigation water supply.",
                    official_link: "https://www.telangana.gov.in/",
                    tags: ["Irrigation"],
                },
                {
                    id: 8,
                    name: "National Food Security Mission",
                    short_benefit: "Support for rice, pulses, coarse cereals.",
                    location: "Pan\u2011India",
                    crop: "rice,pulses,millets",
                    max_land: 50,
                    eligibility: "Farmers growing notified crops.",
                    documents: ["Aadhaar", "Land Records"],
                    benefits: "Subsidized seeds & inputs.",
                    official_link: "https://nfsm.gov.in/",
                    tags: ["Seeds", "Subsidy"],
                },
                {
                    id: 9,
                    name: "Sub\u2011Mission on Agricultural Mechanization",
                    short_benefit: "Subsidy on farm machinery.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "Farmers & FPOs.",
                    documents: ["Aadhaar", "Land Records", "Quotation"],
                    benefits: "40\u201350% subsidy on tractors & implements.",
                    official_link: "https://agrimachinery.nic.in/",
                    tags: ["Mechanization", "Subsidy"],
                },
                {
                    id: 10,
                    name: "Soil Health Card Scheme",
                    short_benefit: "Free soil testing & nutrient advice.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "All farmers.",
                    documents: ["Land Records"],
                    benefits: "Soil test reports & fertilizer recommendations.",
                    official_link: "https://soilhealth.dac.gov.in/",
                    tags: ["Soil", "Advisory"],
                },
                {
                    id: 11,
                    name: "Pradhan Mantri Krishi Sinchai Yojana",
                    short_benefit:
                        "Irrigation coverage & water use efficiency.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "Farmers & communities.",
                    documents: ["Land Records"],
                    benefits:
                        "Micro\u2011irrigation subsidies & infrastructure.",
                    official_link: "https://pmksy.gov.in/",
                    tags: ["Irrigation", "Water"],
                },
                {
                    id: 12,
                    name: "eNAM (National Agriculture Market)",
                    short_benefit: "Online trading platform for farmers.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "Registered farmers & traders.",
                    documents: ["Aadhaar", "Bank Details"],
                    benefits: "Better price discovery & transparent bidding.",
                    official_link: "https://enam.gov.in/",
                    tags: ["Market", "Digital"],
                },
                {
                    id: 13,
                    name: "Kisan Credit Card",
                    short_benefit: "Short\u2011term crop credit.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "All farmers.",
                    documents: ["Aadhaar", "Land Records", "Income Proof"],
                    benefits: "Working capital loan at subsidized interest.",
                    official_link: "https://www.rbi.org.in/",
                    tags: ["Credit", "Loan"],
                },
                {
                    id: 14,
                    name: "National Agriculture Insurance Scheme (NAIS)",
                    short_benefit: "Crop loss insurance cover.",
                    location: "Pan\u2011India",
                    crop: "all notified",
                    max_land: 50,
                    eligibility: "Farmers cultivating insured crops.",
                    documents: ["Land Records", "Aadhaar"],
                    benefits: "Indemnity against yield loss.",
                    official_link: "https://insurance.gov.in/",
                    tags: ["Insurance"],
                },
                {
                    id: 15,
                    name: "Rashtriya Krishi Vikas Yojana",
                    short_benefit: "State plan scheme for agriculture.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "State agriculture projects.",
                    documents: ["Project Documents"],
                    benefits: "Funding support to states for agri development.",
                    official_link: "https://rkvy.nic.in/",
                    tags: ["Development", "State Support"],
                },
                {
                    id: 16,
                    name: "Integrated Scheme on Agriculture Marketing",
                    short_benefit: "Strengthening APMCs & market info.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "State agencies & farmers.",
                    documents: ["State Agreement Docs"],
                    benefits: "Infrastructure & market intelligence.",
                    official_link: "https://agmarknet.gov.in/",
                    tags: ["Market", "Infrastructure"],
                },
                {
                    id: 17,
                    name: "Pradhan Mantri Annadata Aay Sanrakshan Abhiyan",
                    short_benefit: "Minimum Support Price (MSP) for crops.",
                    location: "Pan\u2011India",
                    crop: "wheat,paddy",
                    max_land: 50,
                    eligibility: "Registered farmers.",
                    documents: ["Aadhaar", "Sale Receipt"],
                    benefits: "Assured MSP procurement.",
                    official_link: "https://dahd.nic.in/",
                    tags: ["MSP", "Price Support"],
                },
                {
                    id: 18,
                    name: "Gramin Bhandaran Yojana",
                    short_benefit: "Storage subsidy for rural warehouses.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "Individuals & cooperatives.",
                    documents: ["Land Records", "Project Report"],
                    benefits: "Assistance for rural godowns.",
                    official_link: "https://fcamin.nic.in/",
                    tags: ["Storage", "Subsidy"],
                },
                {
                    id: 19,
                    name: "Paramparagat Krishi Vikas Yojana",
                    short_benefit: "Organic farming support.",
                    location: "Pan\u2011India",
                    crop: "all",
                    max_land: 50,
                    eligibility: "Farmer groups & FPOs.",
                    documents: ["Group Aadhaar", "Land Records"],
                    benefits: "Cluster\u2011based organic farming assistance.",
                    official_link: "https://pkvy.nic.in/",
                    tags: ["Organic", "Sustainable"],
                },
            ];

            // ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            let currentPage = "intro";
            let formState = { category: "", ownership: "" };

            // ‚îÄ‚îÄ PAGE NAV ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            function showPage(page) {
                document
                    .querySelectorAll(".page")
                    .forEach((p) => p.classList.remove("active"));
                document
                    .getElementById(
                        "page" + page.charAt(0).toUpperCase() + page.slice(1),
                    )
                    .classList.add("active");
                document.getElementById("btnBack").style.display =
                    page === "intro" ? "none" : "flex";
                currentPage = page;
                window.scrollTo(0, 0);
            }

            function goBack() {
                if (currentPage === "results") showPage("form");
                else if (currentPage === "form") showPage("intro");
            }

            // ‚îÄ‚îÄ PILL SELECTION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            function selectPill(group, el, value) {
                const container = el.parentElement;
                container
                    .querySelectorAll(".fpill")
                    .forEach((p) => p.classList.remove("sel"));
                el.classList.add("sel");
                formState[group] = value;
                document.getElementById(
                    group === "category" ? "fCategory" : "fOwnership",
                ).value = value;
                checkValid();
            }

            // ‚îÄ‚îÄ LAND VALIDATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            function checkLand() {
                const landVal = parseFloat(
                    document.getElementById("fLand").value,
                );
                const err = document.getElementById("landError");
                if (landVal > 50) {
                    err.style.display = "block";
                    document.getElementById("fLand").style.borderColor =
                        "#c0392b";
                } else {
                    err.style.display = "none";
                    document.getElementById("fLand").style.borderColor = "";
                }
            }

            // ‚îÄ‚îÄ INCOME VALIDATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            function checkIncome() {
                const incomeVal = parseFloat(
                    document.getElementById("fIncome").value,
                );
                const err = document.getElementById("incomeError");
                const hint = document.getElementById("incomeHint");
                if (incomeVal > 500000) {
                    err.style.display = "block";
                    hint.style.display = "none";
                    document.getElementById("fIncome").style.borderColor =
                        "#c0392b";
                } else {
                    err.style.display = "none";
                    hint.style.display = "block";
                    document.getElementById("fIncome").style.borderColor = "";
                }
            }

            // ‚îÄ‚îÄ VALIDATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            function checkValid() {
                const name = document.getElementById("fName").value.trim();
                const district = document.getElementById("fDistrict").value;
                const caste = document.getElementById("fCaste").value;
                const land = document.getElementById("fLand").value;
                const crop = document.getElementById("fCrop").value;
                const soil = document.getElementById("fSoil").value;
                const water = document.getElementById("fWater").value;
                const income = document.getElementById("fIncome").value;
                const cat = formState.category;
                const own = formState.ownership;
                const valid =
                    name &&
                    district &&
                    caste &&
                    land &&
                    parseFloat(land) <= 50 &&
                    crop &&
                    soil &&
                    water &&
                    income &&
                    parseFloat(income) <= 500000 &&
                    cat &&
                    own;
                document.getElementById("btnSubmit").disabled = !valid;
            }

            // ‚îÄ‚îÄ FILTER LOGIC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            function filterSchemes(fd) {
                const landNum = parseFloat(fd.land) || 0;
                const casteLower = fd.caste.toLowerCase();
                const waterLower = fd.water.toLowerCase();

                return SCHEMES.filter((scheme) => {
                    const loc = scheme.location.toLowerCase();
                    const locationMatch =
                        loc === "telangana" ||
                        loc === "pan\u2011india" ||
                        loc === "pan-india";

                    const schemeCrop = scheme.crop.toLowerCase();
                    const cropNorm = fd.crop
                        .toLowerCase()
                        .replace(/\s*\(.*?\)\s*/g, "")
                        .trim();
                    const cropMatch =
                        schemeCrop === "all" ||
                        schemeCrop === "n/a" ||
                        schemeCrop.includes("all") ||
                        schemeCrop.includes(cropNorm.split(" ")[0]) ||
                        cropNorm.includes(schemeCrop.split(" ")[0]);

                    const landMatch =
                        scheme.max_land === null || landNum <= scheme.max_land;

                    const eligText = scheme.eligibility.toLowerCase();

                    const tribalExclusive =
                        scheme.tags.some((t) =>
                            t.toLowerCase().includes("tribal"),
                        ) && !eligText.includes("all");
                    const tribalMatch =
                        fd.category === "Tribal" ||
                        fd.caste === "ST" ||
                        !tribalExclusive;

                    const scstExclusive =
                        (eligText.includes("sc/st") ||
                            eligText.includes(" sc ") ||
                            eligText.includes(" st ")) &&
                        !eligText.includes("all");
                    const casteMatch =
                        !scstExclusive ||
                        casteLower === "sc" ||
                        casteLower === "st" ||
                        fd.category === "Tribal";

                    const schemeTags = scheme.tags.map((t) => t.toLowerCase());
                    const isIrrigationScheme = schemeTags.some(
                        (t) => t.includes("irrigation") || t.includes("water"),
                    );
                    const waterMatch =
                        !isIrrigationScheme || waterLower !== "rainfed";

                    return (
                        locationMatch &&
                        cropMatch &&
                        landMatch &&
                        tribalMatch &&
                        casteMatch &&
                        waterMatch
                    );
                });
            }

            // ‚îÄ‚îÄ RENDER RESULTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            let lastFormData = {};

            function findSchemes() {
                const fd = {
                    name: document.getElementById("fName").value.trim(),
                    district: document.getElementById("fDistrict").value,
                    caste: document.getElementById("fCaste").value,
                    land: document.getElementById("fLand").value,
                    crop: document.getElementById("fCrop").value,
                    soil: document.getElementById("fSoil").value,
                    water: document.getElementById("fWater").value,
                    income: document.getElementById("fIncome").value,
                    category: formState.category,
                    ownership: formState.ownership,
                };
                lastFormData = fd;

                showPage("results");
                document.getElementById("resultsSpinner").style.display =
                    "flex";
                document.querySelector(
                    "#resultsSpinner .spin-txt",
                ).textContent = t("spinnerText");
                document.getElementById("resultsContent").style.display =
                    "none";

                setTimeout(() => {
                    let matched = filterSchemes(fd);
                    // Shuffle and pick a random number between 5 and 10
                    matched = matched.sort(() => Math.random() - 0.5);
                    const count = Math.min(
                        matched.length,
                        Math.floor(Math.random() * 6) + 5,
                    ); // 5 to 10
                    matched = matched.slice(0, count);
                    renderResults(matched, fd);
                    document.getElementById("resultsSpinner").style.display =
                        "none";
                    document.getElementById("resultsContent").style.display =
                        "block";
                }, 900);
            }

            function locBadge(loc) {
                if (loc === "Telangana")
                    return `<span class="card-loc loc-ts">${t("locTelangana")}</span>`;
                if (loc.toLowerCase().includes("pan"))
                    return `<span class="card-loc loc-pan">${t("locPanIndia")}</span>`;
                return `<span class="card-loc loc-oth">üìç ${loc}</span>`;
            }

            function renderResults(schemes, fd) {
                document.getElementById("resultsTitle").textContent =
                    schemes.length > 0
                        ? `${schemes.length} ${schemes.length > 1 ? t("schemesFoundPlural") : t("schemesFoundSingle")}`
                        : t("noMatch");

                const pills = document.getElementById("resultsPills");
                pills.innerHTML = "";
                if (schemes.length > 0)
                    pills.innerHTML += `<span class="r-chip r-chip-green">‚úì ${schemes.length} ${t("eligibleCount")}</span>`;
                [
                    fd.name,
                    fd.district,
                    fd.land + " " + t("acres"),
                    fd.category + " " + t("farmerSuffix"),
                    fd.caste,
                    fd.ownership,
                    "üí∞ ‚Çπ" + Number(fd.income).toLocaleString("en-IN"),
                    "ü™® " + fd.soil,
                    "üíß " + fd.water,
                ].forEach((v) => {
                    pills.innerHTML += `<span class="r-chip">${v}</span>`;
                });

                const list = document.getElementById("resultsList");
                if (schemes.length === 0) {
                    list.innerHTML = `
      <div class="empty">
        <div class="empty-icon">üåæ</div>
        <h3>${t("noMatch")}</h3>
        <p>${t("noMatchMsg")}</p>
      </div>`;
                    return;
                }

                renderedSchemes = schemes;
                list.innerHTML = `<div class="cards">${schemes
                    .map(
                        (s, i) => `
    <div class="card card-anim" style="animation-delay:${i * 0.07}s">
      <div class="card-head">
        <div class="card-head-row">
          <div class="card-name">${s.name}</div>
          <div class="card-meta">
            <span class="card-id">${t("schemeNum")}${s.id}</span>
            ${locBadge(s.location)}
          </div>
        </div>
        <div class="card-benefit">‚ú¶ ${s.short_benefit}</div>
        <div class="card-tags-row">${s.tags.map((tag) => `<span class="card-tag">${tag}</span>`).join("")}</div>
      </div>
      <div class="card-body">
        <div class="cf">
          <div class="cf-label">${t("cfCrop")}</div>
          <div class="cf-val" style="text-transform:capitalize">${s.crop}</div>
        </div>
        <div class="cf">
          <div class="cf-label">${t("cfMaxLand")}</div>
          <div class="cf-val">${s.max_land + " " + t("acres")}</div>
        </div>
        <div class="cf span2">
          <div class="cf-label">${t("cfEligibility")}</div>
          <div class="cf-val">${s.eligibility}</div>
        </div>
        <div class="cf span2">
          <div class="cf-label">${t("cfBenefits")}</div>
          <div class="cf-val">${s.benefits}</div>
        </div>
        ${
            s.documents && s.documents.length > 0
                ? `
        <div class="cf span2">
          <div class="cf-label">${t("cfDocs")}</div>
          <ul class="docs-ul">${s.documents.map((d) => `<li>${d}</li>`).join("")}</ul>
        </div>`
                : ""
        }
      </div>
      <div class="card-foot" style="justify-content:space-between">
        <button class="btn-how" onclick="openModal(${s.id})">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
            <path d="M7 6.5v4M7 4.5v.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          ${t("howToApply")}
        </button>
        <a href="${s.official_link}" target="_blank" rel="noopener noreferrer" class="btn-official">
          ${t("officialWebsite")}
          <svg width="13" height="13" viewBox="0 0 13 13" fill="none">
            <path d="M2 11L11 2M11 2H5M11 2v6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>
    </div>`,
                    )
                    .join("")}</div>`;
            }

            // ‚îÄ‚îÄ MODAL & HOW-TO-APPLY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
            let renderedSchemes = [];

            function openModal(schemeId) {
                const scheme = renderedSchemes.find((s) => s.id === schemeId);
                if (!scheme) return;

                document.getElementById("modalSchemeName").textContent =
                    scheme.name;
                document.getElementById("modalOfficialLink").href =
                    scheme.official_link;
                document.getElementById("modalBody").innerHTML = `
    <div class="modal-loading">
      <div class="modal-spin"></div>
      <div class="modal-spin-txt">${t("modalLoading")}</div>
    </div>`;
                document.getElementById("modalFoot").style.display = "none";
                document.getElementById("modalOverlay").classList.add("open");
                document.body.style.overflow = "hidden";

                generateSteps(scheme);
            }

            function closeModal() {
                document
                    .getElementById("modalOverlay")
                    .classList.remove("open");
                document.body.style.overflow = "";
            }

            function handleOverlayClick(e) {
                if (e.target === document.getElementById("modalOverlay"))
                    closeModal();
            }

            document.addEventListener("keydown", (e) => {
                if (e.key === "Escape") closeModal();
            });

            function getSchemeSpecificSteps(scheme) {
                const name = scheme.name;
                const docs = scheme.documents.join(", ");
                const link = scheme.official_link;
                const tags = (scheme.tags || [])
                    .map((t) => t.toLowerCase())
                    .join(" ");

                // Insurance schemes
                if (
                    tags.includes("insurance") ||
                    name.toLowerCase().includes("insurance") ||
                    name.toLowerCase().includes("fasal bima") ||
                    name.toLowerCase().includes("bima")
                ) {
                    return {
                        steps: [
                            {
                                title: "Gather Your Crop & Land Documents",
                                desc: `Collect your land records (patta/passbook), ${docs}, and details of the crop you have sown including sowing date and area under cultivation.`,
                            },
                            {
                                title: "Contact Your Bank or Insurance Agent",
                                desc: `Visit the bank where you hold your Kisan Credit Card (KCC) or the nearest insurance company agent authorised under ${name}. Loanee farmers are enrolled automatically; non-loanee farmers must apply voluntarily.`,
                            },
                            {
                                title: "Fill the Crop Insurance Proposal Form",
                                desc: `Complete the proposal form with accurate details of your crop type, variety, sowing date, irrigated/rainfed status, and bank account number. Any mismatch can lead to claim rejection.`,
                            },
                            {
                                title: "Pay the Farmer-Share Premium",
                                desc: `Pay your portion of the insurance premium (typically 1.5‚Äì5% of sum insured depending on crop season). Keep the premium receipt and policy document safely.`,
                            },
                            {
                                title: "Report Crop Loss Within 72 Hours",
                                desc: `In case of crop damage due to flood, drought, pest, or other notified risks, immediately inform your bank, insurance company, or local agriculture officer within 72 hours of the event.`,
                            },
                            {
                                title: "Track Your Claim Online",
                                desc: `Visit ${link} or the insurer's portal to track your claim status using your policy number. Ensure your Aadhaar-linked bank account details are correct for direct benefit transfer.`,
                            },
                        ],
                        tip: `Enroll before the cut-off date (usually 1‚Äì2 weeks before sowing season ends). Late enrollment is not permitted under ${name}.`,
                    };
                }

                // Income / Direct Benefit Transfer schemes (PM-KISAN type)
                if (
                    tags.includes("income") ||
                    name.toLowerCase().includes("kisan samman") ||
                    name.toLowerCase().includes("pm-kisan") ||
                    name.toLowerCase().includes("rythu bandhu")
                ) {
                    return {
                        steps: [
                            {
                                title: "Check Your Eligibility First",
                                desc: `Confirm you meet the eligibility criteria: ${scheme.eligibility}. Institutional landholders, government employees, and income-tax payers are typically excluded.`,
                            },
                            {
                                title: "Gather Required Documents",
                                desc: `Keep ready your ${docs} ‚Äî ensure your land records are in your name and your bank account is Aadhaar-seeded.`,
                            },
                            {
                                title: "Register at Agriculture Office or Online",
                                desc: `Visit your Village Revenue Officer (VRO), Agriculture Extension Officer, or the official portal at ${link}. For PM-KISAN, self-registration is available at pmkisan.gov.in.`,
                            },
                            {
                                title: "Submit Completed Application Form",
                                desc: `Fill the registration form with Aadhaar number, land holding details, bank account (IFSC & account number), and mobile number. Double-check all entries before submitting.`,
                            },
                            {
                                title: "Verify Aadhaar-Bank Linkage",
                                desc: `Ensure your Aadhaar is linked to your bank account. Visit your bank branch or use NPCI mapper to verify. Payments are made only to Aadhaar-seeded accounts.`,
                            },
                            {
                                title: "Track Beneficiary Status Online",
                                desc: `Check your beneficiary status on the official portal ${link} using your Aadhaar or registration number. Payments are transferred directly to your bank in instalments.`,
                            },
                        ],
                        tip: `If your name does not appear in the beneficiary list despite registration, contact your local Patwari or Agriculture Department to correct any land record mismatch.`,
                    };
                }

                // Credit / Loan schemes (KCC, bank loans)
                if (
                    tags.includes("credit") ||
                    tags.includes("loan") ||
                    name.toLowerCase().includes("kisan credit") ||
                    name.toLowerCase().includes("credit card")
                ) {
                    return {
                        steps: [
                            {
                                title: "Approach Your Nearest Bank Branch",
                                desc: `Visit a nationalized bank (SBI, Canara Bank, etc.), cooperative bank, or RRB near you. Ask specifically for the ${name} application form.`,
                            },
                            {
                                title: "Collect and Complete the Application",
                                desc: `Fill in details of your land holding, crops planned, estimated production cost, and income. Attach all required documents: ${docs}.`,
                            },
                            {
                                title: "Submit to Bank Manager for Appraisal",
                                desc: `Submit the completed form with documents to the bank manager. The bank will assess your creditworthiness, land ownership, and crop production plan.`,
                            },
                            {
                                title: "Complete Field Verification",
                                desc: `Bank officials may visit your farm to verify land details and suitability. Cooperate and provide all information honestly during the inspection.`,
                            },
                            {
                                title: "Receive Credit Card and Passbook",
                                desc: `After approval, you will receive a ${name} card and passbook with your credit limit (based on crop production costs + contingency expenses). This limit is typically renewed annually.`,
                            },
                            {
                                title: "Use and Repay Timely",
                                desc: `Withdraw money as needed from ATM or bank counter for farm inputs. Ensure repayment within the crop season (usually within 12 months) to maintain your credit limit and benefit from low interest rates.`,
                            },
                        ],
                        tip: `Timely repayment keeps your interest rate as low as 4% per annum under the Interest Subvention Scheme. Defaulting removes this benefit.`,
                    };
                }

                // Soil Health / Testing
                if (
                    tags.includes("soil") ||
                    name.toLowerCase().includes("soil health")
                ) {
                    return {
                        steps: [
                            {
                                title: "Collect Soil Sample From Your Field",
                                desc: `Collect soil from 8‚Äì10 spots in your field at 15‚Äì20 cm depth in a zigzag pattern. Mix all samples together, dry in shade, and keep about 500 grams as your composite sample.`,
                            },
                            {
                                title: "Visit Nearest Soil Testing Lab",
                                desc: `Take your soil sample to the government Soil Testing Laboratory or the Krishi Vigyan Kendra (KVK). Carry your ${docs} for farmer registration.`,
                            },
                            {
                                title: "Register and Submit Sample",
                                desc: `Register as a farmer at the lab counter, fill the sample submission form with your name, land location, crop grown, and irrigation details. Submit sample for analysis.`,
                            },
                            {
                                title: "Receive Your Soil Health Card",
                                desc: `Within 2‚Äì4 weeks, collect your printed Soil Health Card. It will show macro and micro-nutrient levels along with pH and organic carbon content of your soil.`,
                            },
                            {
                                title: "Follow Fertilizer Recommendations",
                                desc: `The card includes crop-specific fertilizer recommendations. Apply the suggested quantities of NPK and micronutrients to avoid over- or under-fertilization and save input costs.`,
                            },
                            {
                                title: "Renew Every 2 Years",
                                desc: `Soil health should be re-tested every 2 years. Visit ${link} to download digital copies of your Soil Health Card or check past results.`,
                            },
                        ],
                        tip: `Collect samples before sowing, not after applying fertilizers, for accurate results. Early morning sampling is best.`,
                    };
                }

                // Irrigation / Water schemes
                if (
                    tags.includes("irrigation") ||
                    tags.includes("water") ||
                    name.toLowerCase().includes("irrigation") ||
                    name.toLowerCase().includes("sinchai") ||
                    name.toLowerCase().includes("drip") ||
                    name.toLowerCase().includes("sprinkler")
                ) {
                    return {
                        steps: [
                            {
                                title: "Check Eligibility and Scheme Component",
                                desc: `Confirm your eligibility: ${scheme.eligibility}. Identify which component applies to you ‚Äî drip/sprinkler subsidy, canal water access, or infrastructure support.`,
                            },
                            {
                                title: "Gather Documents and Land Details",
                                desc: `Collect ${docs}. Prepare a sketch/map of your field showing water source location, proposed pipeline route, or area to be irrigated.`,
                            },
                            {
                                title: "Approach Agriculture or Irrigation Department",
                                desc: `Visit your District Agriculture Office, Irrigation Department office, or apply online at ${link}. Obtain the prescribed application form for ${name}.`,
                            },
                            {
                                title: "Get Approved Supplier/Vendor Quotation",
                                desc: `For equipment subsidy (drip/sprinkler), obtain a quotation from an approved manufacturer/dealer registered under the scheme. Unapproved vendors will not be eligible for subsidy.`,
                            },
                            {
                                title: "Submit Application With Technical Approval",
                                desc: `Submit your application with field sketch, quotation, and documents. A field inspection by a Junior Engineer or Agriculture Officer will verify the technical suitability.`,
                            },
                            {
                                title: "Install System and Claim Subsidy",
                                desc: `After approval, install the system through the approved vendor. Submit installation certificate and photos to the department. Subsidy will be credited to your bank account directly.`,
                            },
                        ],
                        tip: `Choose drip or micro-irrigation systems ‚Äî they qualify for higher subsidy (up to 55% for small/marginal farmers) and save up to 40% water compared to flood irrigation.`,
                    };
                }

                // Seeds / Mechanization / Subsidy on inputs
                if (
                    tags.includes("seeds") ||
                    tags.includes("mechanization") ||
                    tags.includes("subsidy") ||
                    name.toLowerCase().includes("mechanization") ||
                    name.toLowerCase().includes("seed")
                ) {
                    return {
                        steps: [
                            {
                                title: "Visit Agriculture Extension Office",
                                desc: `Contact your local Agriculture Extension Officer (AEO) or Assistant Director of Agriculture (ADA) to confirm the availability of ${name} benefits in your area for the current season.`,
                            },
                            {
                                title: "Prepare and Submit Application",
                                desc: `Fill the application form for ${name} with your personal details, Aadhaar, land records (${docs}), and specifics of the equipment/seeds you require.`,
                            },
                            {
                                title: "Obtain Quotation From Registered Dealer",
                                desc: `For machinery or equipment, get a quotation from an empanelled/approved dealer. Seeds must be procured from government-authorised seed distribution centres or certified dealers.`,
                            },
                            {
                                title: "Await Field Inspection and Approval",
                                desc: `Department officials will inspect your farm and verify the application. Approval is typically processed within 15‚Äì30 working days. You'll be notified via SMS on your registered mobile.`,
                            },
                            {
                                title: "Purchase With Subsidy Deducted Upfront",
                                desc: `In many schemes, the subsidy is deducted at point of purchase ‚Äî you pay only the farmer's share. Collect the official receipt and keep all documents for future reference.`,
                            },
                            {
                                title: "Complete Post-Purchase Verification",
                                desc: `After purchase, inform your AEO and allow a post-verification visit if required. Retain purchase receipts ‚Äî subsidy reversal may occur if verification fails.`,
                            },
                        ],
                        tip: `Apply early in the season ‚Äî budgets are limited and benefits are distributed on a first-come, first-served basis within district allocations.`,
                    };
                }

                // Market / Price support schemes
                if (
                    tags.includes("msp") ||
                    tags.includes("market") ||
                    tags.includes("price support") ||
                    name.toLowerCase().includes("msp") ||
                    name.toLowerCase().includes("market") ||
                    name.toLowerCase().includes("enam")
                ) {
                    return {
                        steps: [
                            {
                                title: "Register as a Farmer/Seller",
                                desc: `Register yourself on the relevant portal ‚Äî ${link}. For eNAM, visit your nearest APMC mandi. For MSP schemes, register at the local procurement agency (like NAFED, FCI, or state agency).`,
                            },
                            {
                                title: "Gather Required Documents",
                                desc: `Keep ${docs} ready. For MSP procurement you'll also need a mobile number linked to Aadhaar and a bank account number for payment.`,
                            },
                            {
                                title: "Know Your Crop's MSP / Market Price",
                                desc: `Check the current MSP or market price for your crop on ${link}. Prices are announced before each season ‚Äî plan your sale accordingly to maximise returns.`,
                            },
                            {
                                title: "Transport Produce to Mandi / Procurement Centre",
                                desc: `Bring your harvested and cleaned produce to the designated mandi or procurement centre on the scheduled date. Ensure produce meets minimum quality/moisture standards to avoid rejection.`,
                            },
                            {
                                title: "Complete Weighing and Sale",
                                desc: `Your produce will be weighed, graded, and a sale slip issued. For MSP procurement, a token is generated. For eNAM, electronic bidding happens and the highest bid is accepted.`,
                            },
                            {
                                title: "Receive Payment Directly to Bank",
                                desc: `Payment is credited within 24‚Äì72 hours directly to your registered bank account. Track status on the portal using your sale slip or token number.`,
                            },
                        ],
                        tip: `Clean, dry, and sort your produce before reaching the mandi ‚Äî good quality lots fetch better bids on eNAM and pass MSP quality norms without rejection.`,
                    };
                }

                // Development / Infrastructure / State support
                if (
                    tags.includes("development") ||
                    tags.includes("infrastructure") ||
                    tags.includes("state support")
                ) {
                    return {
                        steps: [
                            {
                                title: "Identify Relevant Component/Activity",
                                desc: `${name} supports multiple activities. Identify the component relevant to you ‚Äî farm pond, horticulture, post-harvest, FPO formation, etc. Consult your block Agriculture Officer for guidance.`,
                            },
                            {
                                title: "Prepare Project/Activity Proposal",
                                desc: `Prepare a brief proposal describing your activity, estimated cost, land details, and expected outcome. Collect required documents: ${docs}.`,
                            },
                            {
                                title: "Submit Application to District Agriculture Department",
                                desc: `Submit your application at the District Agriculture Office or through the online portal ${link}. Applications are reviewed at district and state level.`,
                            },
                            {
                                title: "Attend Technical Scrutiny and Field Visit",
                                desc: `A technical committee will scrutinize your proposal. Be present during the field visit and provide all requested information clearly.`,
                            },
                            {
                                title: "Receive Sanction and Start Activity",
                                desc: `On approval, you will receive a sanction order specifying the subsidy/grant amount and activity timeline. Begin the activity only after receiving the sanction letter.`,
                            },
                            {
                                title: "Submit Completion Report for Release of Funds",
                                desc: `After completing the activity, submit a completion report with photographs and bills to the district office. Remaining funds are released after verification.`,
                            },
                        ],
                        tip: `Form a Farmer Producer Organisation (FPO) to access higher funding limits and collective bargaining benefits under ${name}.`,
                    };
                }

                // Generic fallback ‚Äî scheme-aware but works for any scheme
                return {
                    steps: [
                        {
                            title: "Verify Your Eligibility Clearly",
                            desc: `Confirm you meet all conditions: ${scheme.eligibility}. Contact your local Agriculture Extension Officer (AEO) if you're unsure whether you qualify.`,
                        },
                        {
                            title: "Collect All Required Documents",
                            desc: `Gather your ${docs}. Ensure all documents are current, attested where necessary, and that your Aadhaar number is linked to your bank account.`,
                        },
                        {
                            title: "Visit Agriculture Office or Apply Online",
                            desc: `Go to your District Agriculture Office, Common Service Centre (CSC), or visit the official website at ${link} to obtain and fill the application form for ${name}.`,
                        },
                        {
                            title: "Fill the Application Accurately",
                            desc: `Provide correct personal details, land holding information, Aadhaar number, bank account (with IFSC code), and crop details. Any mismatch may delay or reject your application.`,
                        },
                        {
                            title: "Attach Documents and Submit",
                            desc: `Attach self-attested copies of all required documents to the filled application form. Submit at the designated counter and collect an acknowledgement receipt with a reference number.`,
                        },
                        {
                            title: "Track Application and Receive Benefits",
                            desc: `Use your reference number to track your application status on ${link} or by calling your local Agriculture Office. Benefits are transferred directly to your bank account once approved.`,
                        },
                    ],
                    tip: `Keep photocopies of all submitted documents and the acknowledgement slip. Carry originals during any verification visit by government officials.`,
                };
            }

            async function generateSteps(scheme) {
                const prompt = `You are an expert on Indian government agricultural schemes. A farmer wants to apply for the "${scheme.name}" scheme.

Scheme details:
- Eligibility: ${scheme.eligibility}
- Benefits: ${scheme.benefits}
- Required Documents: ${scheme.documents.join(", ")}
- Official Link: ${scheme.official_link}
- Location: ${scheme.location}

Generate exactly 5-7 clear, practical, numbered steps the farmer should follow to apply for this scheme. Each step must have:
1. A short title (4-7 words)
2. A 1-2 sentence description that is specific and actionable

Also add one short "Pro Tip" at the end.

Respond ONLY in this exact JSON format, no markdown, no extra text:
{
  "steps": [
    {"title": "Step title here", "desc": "Description here."},
    ...
  ],
  "tip": "Pro tip text here."
}`;

                try {
                    const res = await fetch(
                        "https://api.anthropic.com/v1/messages",
                        {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                                model: "claude-sonnet-4-5",
                                max_tokens: 1000,
                                messages: [{ role: "user", content: prompt }],
                            }),
                        },
                    );

                    const data = await res.json();
                    if (data.error) throw new Error(data.error.message);
                    const raw = data.content
                        .map((b) => b.text || "")
                        .join("")
                        .trim();
                    const clean = raw.replace(/```json|```/g, "").trim();
                    const parsed = JSON.parse(clean);
                    renderSteps(parsed);
                } catch (err) {
                    // Generate scheme-specific fallback steps
                    const fallback = getSchemeSpecificSteps(scheme);
                    renderSteps(fallback);
                }
            }

            function renderSteps(data) {
                const stepsHtml = data.steps
                    .map(
                        (step, i) => `
    <div class="step-item" style="animation-delay:${i * 0.08}s">
      <div class="step-num">${i + 1}</div>
      <div class="step-content">
        <div class="step-title">${step.title}</div>
        <div class="step-desc">${step.desc}</div>
      </div>
    </div>`,
                    )
                    .join("");

                document.getElementById("modalBody").innerHTML = `
    <div class="steps-list">${stepsHtml}</div>
    ${data.tip ? `<div class="modal-tip"><strong>${t("proTip")}:</strong> ${data.tip}</div>` : ""}`;
                document.getElementById("modalFoot").style.display = "flex";
                document.querySelector(".modal-foot-note").textContent =
                    t("modalFootNote");
            }
        </script>

        <!-- ‚îÄ‚îÄ HOW TO APPLY MODAL ‚îÄ‚îÄ -->
        <div
            class="modal-overlay"
            id="modalOverlay"
            onclick="handleOverlayClick(event)"
        >
            <div class="modal" id="modal">
                <div class="modal-handle"></div>
                <div class="modal-head">
                    <div>
                        <div
                            class="modal-scheme-name"
                            id="modalSchemeName"
                        ></div>
                        <div class="modal-subtitle" data-i18n="modalSubtitle">
                            Step-by-step application guide
                        </div>
                    </div>
                    <button class="modal-close" onclick="closeModal()">
                        ‚úï
                    </button>
                </div>
                <div class="modal-body" id="modalBody">
                    <div class="modal-loading">
                        <div class="modal-spin"></div>
                        <div class="modal-spin-txt" data-i18n="modalLoading">
                            Generating application steps‚Ä¶
                        </div>
                    </div>
                </div>
                <div class="modal-foot" id="modalFoot" style="display: none">
                    <span class="modal-foot-note" data-i18n="modalFootNote"
                        >üí° Steps are AI-generated based on scheme details</span
                    >
                    <a
                        id="modalOfficialLink"
                        href="#"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="btn-official"
                        style="font-size: 0.8rem; padding: 8px 16px"
                    >
                        <span data-i18n="officialWebsite"
                            >Official Website</span
                        >
                        ‚Üó
                    </a>
                </div>
            </div>
        </div>
    </body>
</html>
